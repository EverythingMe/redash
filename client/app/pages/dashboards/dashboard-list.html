<div class='container'>
  <page-header title="Dashboards"></page-header>

  <div class="row">
    <div class="col-md-3 list-control-t">
      <input type='text' class='form-control m-b-10' placeholder="Search Dashboards..." ng-change="$ctrl.update()" ng-model="$ctrl.searchText"
             autofocus/>

      <div class="list-group m-b-10 tags-list tiled">
        <a href="dashboards" class="list-group-item" ng-class="{active: $ctrl.currentPage == 'all'}">
          All Dashboards
        </a>

        <a href="dashboards/favorite" class="list-group-item" ng-class="{active: $ctrl.currentPage == 'favorites'}">
          <span class="btn-favourite">
            <i class="fa fa-star" aria-hidden="true"></i>
          </span>
          Favorites
        </a>
      </div>

      <div class="m-b-10">
        <tags-list tags-url="api/dashboards/tags" on-tags-update="$ctrl.onTagsUpdate"></tags-list>
      </div>
    </div>

    <div ng-if="!$ctrl.loaded" class="col-md-9 list-content text-center p-t-15 p-b-15">
      <i class="fa fa-spinner fa-2x fa-pulse"></i>
      <br>
      Loading dashboards...
    </div>

    <!--Empty states-->
    <div ng-if="$ctrl.loaded && $ctrl.showEmptyState" class="col-md-9 list-content">
      <!--No dashboards-->
      <div ng-if="($ctrl.currentPage == 'all') && ($ctrl.searchText === undefined || $ctrl.searchText.length == 0)">
        <empty-state icon="zmdi zmdi-view-quilt" description="See the big picture" show-dashboard-step="true" illustration="dashboard"
          help-link="http://help.redash.io/category/22-dashboards"></empty-state>
      </div>
      <!--No favorites-->
      <div class="tiled bg-white p-15" ng-if="($ctrl.currentPage == 'favorites') && ($ctrl.searchText === undefined || $ctrl.searchText.length == 0)">
        Mark dashboards as favorite
        <span class="btn-favourite">
          <i class="fa fa-star" aria-hidden="true"></i>
        </span> to list them here.
      </div>
      <!--No search hits-->
      <div class="tiled bg-white p-15" ng-if="$ctrl.searchText.length > 0">
        Sorry, we couldn't find anything.
      </div>
      <!--No dashboard found for this tag-->
      <div class="tiled bg-white p-15" ng-if="$ctrl.dashboardNotFoundTag">
        No dashboards found tagged with 'X' (probably the dashboard is archived by now).
      </div>
    </div>

    <div ng-if="$ctrl.loaded && !$ctrl.showEmptyState" class="col-md-9 list-content">
      <div class="bg-white tiled">
        <table class="table table-condensed table-hover table-data">
          <thead>
            <tr>
              <th style="width: 33px"></th>
              <th>Name</th>
              <th></th>
              <th>Created At</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="dashboard in $ctrl.paginator.getPageRows()" ng-click="$ctrl.navigateTo($event, 'dashboard/' + dashboard.slug)">
              <td class="p-r-0">
                <favorites-control item="dashboard"></favorites-control>
              </td>
              <td class="table-main-title">
                <a href="dashboard/{{ dashboard.slug }}">
                  {{ dashboard.name }}
                </a>
                <br>
                <span class="label label-default" ng-if="dashboard.is_draft">Unpublished</span>
                <tags-control item="dashboard"></tags-control>
              </td>
              <td class="p-r-0">
                <img ng-src="{{ dashboard.user.profile_image_url }}" class="profile__image_thumb" title="Created by {{ dashboard.user.name }}"
                />
              </td>
              <td>{{ dashboard.created_at | dateTime }}</td>
            </tr>
          </tbody>
        </table>
        <paginator paginator="$ctrl.paginator"></paginator>
      </div>
    </div>

    <div class="col-md-3 list-control-r-b">
      <input type='text' class='form-control m-b-10' placeholder="Search Dashboards..." ng-change="$ctrl.update()" ng-model="$ctrl.searchText"
             autofocus/>

      <div class="list-group m-b-10 tags-list tiled">
        <a href="dashboards" class="list-group-item" ng-class="{active: $ctrl.currentPage == 'all'}">
          All Dashboards
        </a>

        <a href="dashboards/favorite" class="list-group-item" ng-class="{active: $ctrl.currentPage == 'favorites'}">
          <span class="btn-favourite">
            <i class="fa fa-star" aria-hidden="true"></i>
          </span>
          Favorites
        </a>
      </div>

      <tags-list tags-url="api/dashboards/tags" on-tags-update="$ctrl.onTagsUpdate"></tags-list>
    </div>
  </div>
</div>
